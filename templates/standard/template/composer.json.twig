{
    "name": "{{ nodes['name'].text }}",
    "description": "{{ nodes['description'].text }}",
    "version": "1.0.0",
{% if nodes['type.cli'] is defined %}
    "type": "cli",
{% elseif nodes['type.web'] is defined %}
    "type": "application",
{% elseif nodes['type.library'] is defined %}
    {%- if nodes['type.library.type.symfonyBundle'] is defined %}
    "type": "symfony-bundle",
    {%- else %}
    "type": "library",
    {%- endif %}
{% endif %}

{% if nodes['type.cli'] is defined %}
    "bin": "bin/{{ nodes['type.cli.binaryName'].text }}",
{% endif %}
    "minimum-stability": "stable",
    "prefer-stable": true,
    "require": {
        "php": ">={{ nodes['phpVersion'].description }}"
    },
    "require-dev": {
        "roave/security-advisories": "dev-latest"
    },
    "scripts": {
{% if nodes['linter.phpcs'] is defined %}
        "lint": "phpcs",
        "lint:fix": "phpcbf",
{% endif %}
{% if nodes['staticAnalyzer'] is defined %}
    {%- if nodes['staticAnalyzer.phpstan'] is defined %}
        "phpstan": "phpstan analyse",
    {%- endif %}

    {%- if nodes['staticAnalyzer.psalm'] is defined %}

        "psalm": "psalm src",
    {%- endif %}

        "analyze": [
    {%- if nodes['staticAnalyzer.phpstan'] is defined and nodes['staticAnalyzer.psalm'] is defined %}

            "@phpstan",
            "@psalm"
    {%- elseif nodes['staticAnalyzer.phpstan'] is defined %}

            "@phpstan"
    {%- elseif nodes['staticAnalyzer.psalm'] is defined %}

            "@psalm"
    {%- endif %}

        ]
{% endif %}
    },
    "autoload": {
        "psr-4": {
{% if nodes['type.library.namespace'] is defined %}
            "{{ nodes['type.library.namespace'].text }}": "src/"
{% else %}
            "App\\": "src/"
{% endif %}
        }
    }
}
